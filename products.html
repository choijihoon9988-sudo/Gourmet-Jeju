<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ë¥´ë©” ì œì£¼ - ìŠ¤ë§ˆíŠ¸ E-ì¹´íƒˆë¡œê·¸ & ê²¬ì </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        [x-cloak] { display: none!important; }
        .font-pretendard { font-family: 'Pretendard', system-ui, sans-serif; }
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .animate-slide-in { animation: slideIn 0.3s ease-out forwards; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì˜ìˆ˜ì¦ ìŠ¤íƒ€ì¼ */
        .receipt-paper {
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 10px 10px;
            position: relative;
        }
        .receipt-paper::before {
            content: ""; position: absolute; top: -5px; left: 0; width: 100%; height: 10px;
            background: radial-gradient(circle, transparent, transparent 50%, #fff 50%, #fff 100%) -7px -8px / 15px 15px repeat-x;
        }
        .receipt-paper::after {
            content: ""; position: absolute; bottom: -5px; left: 0; width: 100%; height: 10px;
            background: radial-gradient(circle, transparent, transparent 50%, #fff 50%, #fff 100%) -7px -2px / 15px 15px repeat-x;
            transform: rotate(180deg);
        }
        
        /* ëª¨ë°”ì¼ í•˜ë‹¨ë°” ì•ˆì „ ì˜ì—­ (ì•„ì´í° ë“±) */
        .safe-area-pb { padding-bottom: env(safe-area-inset-bottom); }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 'sans': ['"Pretendard"', 'system-ui', 'sans-serif'] },
                    colors: { 'brand-navy': '#0f172a', 'brand-gold': '#d4af37', 'brand-orange': '#ea580c' }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 text-gray-800 font-sans antialiased pb-20 md:pb-0" x-data="catalogApp()">

    <div x-show="isSending" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/70 backdrop-blur-sm text-white" x-cloak>
        <i class="fa-solid fa-circle-notch fa-spin text-5xl mb-4 text-brand-orange"></i>
        <p class="text-lg font-bold animate-pulse">êµ¬ë¥´ë©” ì œì£¼ ë³¸ì‚¬ë¡œ ì ‘ìˆ˜ ì¤‘...</p>
        <p class="text-sm text-gray-300 mt-2">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>

    <header class="bg-white shadow-sm fixed w-full z-50 transition-all duration-300">
        <nav class="container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-brand-navy flex items-center gap-2">
                <i class="fa-solid fa-utensils text-brand-gold"></i> Gourmet Jeju
            </a>
            <div class="flex items-center gap-6">
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-gray-600 hover:text-brand-navy font-medium">Home</a>
                    <a href="about.html" class="text-gray-600 hover:text-brand-navy font-medium">About</a>
                    <a href="#" class="text-brand-navy font-bold border-b-2 border-brand-navy pb-1">Products</a>
                </div>
                <div class="hidden md:block relative cursor-pointer group" @click="openCartModal = true">
                    <div class="p-2 rounded-full hover:bg-gray-100 transition relative">
                        <i class="fa-solid fa-clipboard-list text-2xl text-brand-navy"></i>
                        <span x-show="cart.length > 0" class="absolute -top-1 -right-1 bg-brand-orange text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-white shadow-sm animate-bounce" x-text="cart.length"></span>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="pt-24 pb-10 px-4 sm:px-6 container mx-auto">
        
        <div class="text-center mb-12">
            <span class="text-brand-orange font-bold tracking-wider text-xs uppercase mb-2 block">Smart Order System</span>
            <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">ë¸Œëœë“œë¥¼ í´ë¦­í•˜ë©´ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ê°€ í¼ì³ì§‘ë‹ˆë‹¤</h1>
            <p class="text-gray-500 text-sm md:text-base break-keep max-w-2xl mx-auto">
                í•„ìš”í•œ ì‹ìì¬ë¥¼ ë‹´ê³  ê²¬ì ì„œë¥¼ ìƒì„±í•˜ì„¸ìš”.<br class="md:hidden"> <strong>ì¬ê³  í™•ì¸ ë° ë°œì£¼</strong>ê°€ ê°„í¸í•´ì§‘ë‹ˆë‹¤.
            </p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-5 mb-20">
            <template x-for="brand in brands" :key="brand.name">
                <button @click="openPdfViewer(brand)" 
                        class="bg-white p-6 rounded-2xl border border-gray-200 hover:border-brand-navy hover:shadow-xl hover:-translate-y-1 transition-all group flex flex-col items-center justify-center gap-4 h-40 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-brand-navy/5 text-brand-navy text-[10px] font-bold px-2 py-1 rounded-bl-lg">
                        <i class="fa-solid fa-list-ul mr-1"></i><span x-text="brand.items.length"></span>ì¢…
                    </div>
                    <i :class="brand.icon" class="text-4xl text-gray-300 group-hover:text-brand-navy transition-colors duration-300"></i>
                    <div class="text-center z-10">
                        <span class="font-bold text-sm text-gray-800 group-hover:text-brand-navy block uppercase mb-1" x-text="brand.name"></span>
                        <span class="text-[10px] text-gray-400 group-hover:text-brand-orange transition-colors" x-text="brand.desc"></span>
                    </div>
                </button>
            </template>
        </div>
        
    </main>

    <nav class="md:hidden fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 z-50 safe-area-pb shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
        <div class="grid grid-cols-4 h-16">
            <a href="index.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-brand-navy active:bg-gray-50">
                <i class="fa-solid fa-house text-lg mb-1"></i>
                <span class="text-[10px] font-medium">í™ˆ</span>
            </a>
            <a href="tel:010-0000-0000" class="flex flex-col items-center justify-center text-gray-500 hover:text-brand-navy active:bg-gray-50">
                <i class="fa-solid fa-phone text-lg mb-1"></i>
                <span class="text-[10px] font-medium">ì „í™”ë¬¸ì˜</span>
            </a>
            <a href="http://pf.kakao.com/_sJAuxb" target="_blank" class="flex flex-col items-center justify-center text-gray-500 hover:text-brand-navy active:bg-gray-50">
                <i class="fa-solid fa-comments text-lg mb-1"></i>
                <span class="text-[10px] font-medium">ì¹´í†¡ìƒë‹´</span>
            </a>
            <button @click="openCartModal = true" class="flex flex-col items-center justify-center text-brand-navy bg-slate-50 active:bg-slate-100 relative border-l border-gray-100">
                <div class="relative">
                    <i class="fa-solid fa-clipboard-list text-xl mb-1"></i>
                    <span x-show="cart.length > 0" class="absolute -top-2 -right-2 bg-brand-orange text-white text-[9px] font-bold w-4 h-4 flex items-center justify-center rounded-full animate-bounce" x-text="cart.length"></span>
                </div>
                <span class="text-[10px] font-bold">ê²¬ì í•¨</span>
            </button>
        </div>
    </nav>

    <div x-show="isViewerOpen" class="fixed inset-0 z-[60] flex items-center justify-center" x-cloak>
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" @click="closePdfViewer()"></div>
        <div class="relative w-full h-full md:w-[95%] md:h-[90%] bg-white md:rounded-2xl shadow-2xl flex flex-col md:flex-row overflow-hidden animate-slide-in">
            <div class="w-full md:w-7/12 h-[45%] md:h-full bg-slate-800 relative group">
                <div x-show="loadingPdf" class="absolute inset-0 flex items-center justify-center text-white">
                    <div class="flex flex-col items-center">
                        <i class="fa-solid fa-circle-notch fa-spin text-3xl mb-2"></i>
                        <span class="text-xs opacity-80">ì¹´íƒˆë¡œê·¸ ë¡œë”©ì¤‘...</span>
                    </div>
                </div>
                <iframe :src="currentPdfUrl" class="w-full h-full border-0" @load="loadingPdf = false"></iframe>
            </div>
            <div class="w-full md:w-5/12 h-[55%] md:h-full bg-white flex flex-col border-l border-gray-200 shadow-xl z-10">
                <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-slate-50 shrink-0">
                    <div>
                        <h3 class="font-bold text-lg text-brand-navy flex items-center">
                            <span class="text-brand-orange mr-2 text-xl">â—</span>
                            <span x-text="currentBrandName"></span>
                        </h3>
                    </div>
                    <button @click="closePdfViewer()" class="text-gray-400 hover:text-brand-navy transition p-2"><i class="fa-solid fa-xmark text-2xl"></i></button>
                </div>
                <div class="flex-1 overflow-y-auto custom-scroll p-2 bg-gray-50/50">
                    <div class="space-y-2">
                        <template x-for="product in currentBrandProducts" :key="product.code">
                            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:border-brand-orange/30 hover:shadow-md transition-all group flex items-center justify-between gap-3">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="text-[10px] font-mono text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded" x-text="product.code"></span>
                                        <span x-show="product.tag" class="text-[9px] font-bold text-white bg-red-500 px-1.5 py-0.5 rounded" x-text="product.tag"></span>
                                    </div>
                                    <h4 class="font-bold text-gray-800 text-sm truncate" x-text="product.name"></h4>
                                    <p class="text-xs text-gray-500 mt-0.5" x-text="product.spec"></p>
                                </div>
                                <button @click="addToCart(product)" 
                                        :class="isInCart(product) ? 'bg-green-500 border-green-500 text-white' : 'bg-white border-gray-200 text-brand-navy hover:border-brand-navy hover:bg-brand-navy hover:text-white'"
                                        class="shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all shadow-sm active:scale-90">
                                    <i :class="isInCart(product) ? 'fa-solid fa-check' : 'fa-solid fa-plus'"></i>
                                </button>
                            </div>
                        </template>
                    </div>
                    <div class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100">
                        <label class="block text-xs font-bold text-brand-navy mb-2">ì°¾ìœ¼ì‹œëŠ” ìƒí’ˆì´ ë¦¬ìŠ¤íŠ¸ì— ì—†ë‚˜ìš”?</label>
                        <div class="flex gap-2">
                            <input type="text" x-model="quickInput" @keyup.enter="addQuickItem()" placeholder="ì˜ˆ: 27í˜ì´ì§€ ìš°ì¸¡ í•˜ë‹¨ ì¹˜ì¦ˆ" class="flex-1 px-3 py-2 rounded-lg border border-blue-200 text-sm focus:outline-none focus:border-brand-navy">
                            <button @click="addQuickItem()" class="bg-brand-navy text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-slate-700 transition">ì¶”ê°€</button>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-100 bg-white shrink-0 flex justify-between items-center">
                    <div class="text-xs text-gray-500">í˜„ì¬ <strong class="text-brand-navy text-sm" x-text="cart.length"></strong>ê°œ ìƒí’ˆ ë‹´ê¹€</div>
                    <button @click="openCartModal = true" class="bg-brand-orange text-white px-6 py-2.5 rounded-lg text-sm font-bold hover:bg-orange-600 transition shadow-md">ê²¬ì ì„œ í™•ì¸ &rarr;</button>
                </div>
            </div>
        </div>
    </div>

    <div x-show="openCartModal" class="fixed inset-0 z-[70] flex items-center justify-center px-4" x-cloak>
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" @click="openCartModal = false"></div>
        <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl relative z-10 overflow-hidden flex flex-col max-h-[85vh] animate-slide-in">
            
            <div x-show="!showReceipt" class="flex flex-col h-full">
                <div class="bg-brand-navy text-white p-5 flex justify-between items-center shrink-0">
                    <h3 class="font-bold text-lg">ê²¬ì  ìš”ì²­ì„œ ì‘ì„±</h3>
                    <button @click="openCartModal = false"><i class="fa-solid fa-xmark text-xl"></i></button>
                </div>
                <div class="p-5 overflow-y-auto custom-scroll flex-1">
                    <ul class="space-y-2 mb-6 border-b border-gray-100 pb-4">
                        <template x-for="(item, index) in cart" :key="index">
                            <li class="flex justify-between items-center text-sm py-2 bg-slate-50 px-3 rounded-lg border border-slate-100">
                                <div class="flex flex-col w-3/4">
                                    <span class="text-[10px] text-brand-orange font-bold" x-text="item.brandName || 'ì§ì ‘ì…ë ¥'"></span>
                                    <span class="font-bold text-gray-700 truncate" x-text="item.name"></span>
                                    <span class="text-[10px] text-gray-400" x-text="item.spec"></span>
                                </div>
                                <button @click="removeFromCart(index)" class="text-gray-300 hover:text-red-500 p-2"><i class="fa-solid fa-trash-can"></i></button>
                            </li>
                        </template>
                        <li x-show="cart.length === 0" class="text-center text-gray-400 py-8">ë‹´ê¸´ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</li>
                    </ul>
                    
                    <form @submit.prevent="generateReceipt">
                        <div class="space-y-4">
                            <div>
                                <label class="text-xs font-bold text-gray-500 mb-1 block">ì—…ì²´ëª… <span class="text-red-500">*</span></label>
                                <input type="text" x-model="userInfo.company" required class="w-full px-4 py-3 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-navy focus:border-brand-navy outline-none transition" placeholder="ì˜ˆ: êµ¬ë¥´ë©” ì¹´í˜">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-gray-500 mb-1 block">ì—°ë½ì²˜ <span class="text-red-500">*</span></label>
                                <input type="text" x-model="userInfo.contact" required class="w-full px-4 py-3 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-navy focus:border-brand-navy outline-none transition" placeholder="ì˜ˆ: 010-1234-5678">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-gray-500 mb-1 block">ìš”ì²­ì‚¬í•­ (ì„ íƒ)</label>
                                <input type="text" x-model="userInfo.memo" class="w-full px-4 py-3 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-navy focus:border-brand-navy outline-none transition" placeholder="ì˜ˆ: ë§¤ì£¼ í™”ìš”ì¼ ë°°ì†¡ í¬ë§">
                            </div>
                        </div>
                        <button type="submit" class="w-full bg-brand-orange text-white font-bold py-4 rounded-xl shadow-md hover:bg-orange-600 transition mt-8 transform hover:-translate-y-1">
                            ê²¬ì ì„œ ë¯¸ë¦¬ë³´ê¸° <i class="fa-solid fa-receipt ml-2"></i>
                        </button>
                    </form>
                </div>
            </div>

            <div x-show="showReceipt" class="flex flex-col h-full">
                <div class="bg-gray-100 p-4 flex justify-between items-center border-b border-gray-200 shrink-0">
                    <h3 class="font-bold text-gray-700"><i class="fa-solid fa-image mr-2"></i>ì œì¶œ ë° ì €ì¥</h3>
                    <button @click="showReceipt = false" class="text-sm text-gray-500 underline hover:text-brand-navy">ìˆ˜ì •í•˜ê¸°</button>
                </div>
                
                <div class="flex-1 bg-gray-200 p-6 overflow-y-auto flex justify-center items-start">
                    <div id="receipt-capture" class="bg-white w-full max-w-[320px] p-6 shadow-xl text-gray-800 receipt-paper">
                        <div class="text-center border-b-2 border-black pb-5 mb-5">
                            <h2 class="text-2xl font-extrabold tracking-tight text-brand-navy">Gourmet Jeju</h2>
                            <p class="text-[10px] text-gray-500 mt-1 tracking-widest uppercase">Premium Food Partner</p>
                            <div class="mt-4 border border-black px-4 py-1 inline-block rounded-full">
                                <p class="text-xs font-bold">ê²¬ì  ìš”ì²­ì„œ</p>
                            </div>
                            <p class="text-[10px] text-gray-400 mt-2" x-text="new Date().toLocaleString()"></p>
                        </div>

                        <div class="text-xs mb-5 space-y-2 border-b border-dashed border-gray-300 pb-5">
                            <div class="flex justify-between"><span class="text-gray-500">ì—…ì²´ëª…</span> <span class="font-bold text-base" x-text="userInfo.company"></span></div>
                            <div class="flex justify-between"><span class="text-gray-500">ì—°ë½ì²˜</span> <span x-text="userInfo.contact"></span></div>
                            <div class="flex justify-between items-start"><span class="text-gray-500 w-10 shrink-0">ë©”ëª¨</span> <span class="text-right break-words w-full" x-text="userInfo.memo"></span></div>
                        </div>

                        <table class="w-full text-xs mb-5">
                            <thead class="border-b border-black">
                                <tr class="text-left">
                                    <th class="py-2 font-bold">í’ˆëª©ëª… / ê·œê²©</th>
                                    <th class="py-2 text-right font-bold">ë¸Œëœë“œ</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <template x-for="item in cart">
                                    <tr>
                                        <td class="py-2 pr-2 align-top">
                                            <div class="font-bold text-sm" x-text="item.name"></div>
                                            <div class="text-[10px] text-gray-500 mt-0.5" x-text="item.spec"></div>
                                        </td>
                                        <td class="py-2 text-right align-top text-[10px] text-gray-500 font-medium" x-text="item.brandName"></td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>

                        <div class="border-t-2 border-black pt-4 text-center">
                            <p class="text-[10px] text-gray-500 mb-3">ìœ„ í’ˆëª©ì˜ ê²¬ì  ë° ì¬ê³  í™•ì¸ì„ ìš”ì²­í•©ë‹ˆë‹¤.</p>
                            <div class="bg-gray-100 p-3 rounded-lg text-xs text-gray-600">
                                <div class="font-bold mb-1">êµ¬ë¥´ë©” ì œì£¼ ê³ ê°ì„¼í„°</div>
                                <div>010-0000-0000</div>
                                <div class="text-[10px] text-brand-orange mt-1">ì¹´ì¹´ì˜¤í†¡ ID: gourmet_jeju</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-4 bg-white border-t border-gray-200 shrink-0 z-20">
                    
                    <div x-show="!showKakaoLink">
                        <button @click="sendAndDownloadReceipt()" class="w-full bg-brand-navy text-white font-bold py-3.5 rounded-xl hover:bg-slate-800 transition flex items-center justify-center gap-2 shadow-lg transform active:scale-95">
                            <i class="fa-solid fa-paper-plane"></i> ì œì¶œ ë° ì‚¬ë³¸ ì €ì¥
                        </button>
                        <p class="text-[11px] text-center text-gray-400 mt-3">
                            * í´ë¦­ ì‹œ ë³¸ì‚¬ë¡œ ì „ì†¡ë˜ë©°, ê³ ê°ë‹˜ê»˜ ì‚¬ë³¸ì´ ì €ì¥ë©ë‹ˆë‹¤.
                        </p>
                    </div>

                    <div x-show="showKakaoLink" class="text-center animate-fade-in-up">
                        <p class="text-sm font-bold text-green-600 mb-3"><i class="fa-solid fa-check-circle mr-1"></i> ì ‘ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                        <a href="http://pf.kakao.com/_sJAuxb" target="_blank" class="w-full bg-[#FAE100] text-[#371D1E] font-bold py-3.5 rounded-xl hover:bg-[#F9E000] transition flex items-center justify-center gap-2 shadow-lg transform active:scale-95">
                            <i class="fa-solid fa-comment"></i> ì €ì¥ëœ ì´ë¯¸ì§€ ì¹´í†¡ìœ¼ë¡œ ë³´ë‚´ê¸°
                        </a>
                        <p class="text-[11px] text-gray-400 mt-3">
                            * ê°¤ëŸ¬ë¦¬ì— ì €ì¥ëœ ê²¬ì ì„œ ì´ë¯¸ì§€ë¥¼ ì±„íŒ…ë°©ì— ì˜¬ë ¤ì£¼ì„¸ìš”.
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        function catalogApp() {
            return {
                isViewerOpen: false,
                openCartModal: false,
                showReceipt: false,
                loadingPdf: false,
                isSending: false,
                showKakaoLink: false, // [NEW] ì¹´í†¡ ë²„íŠ¼ ë…¸ì¶œ ìƒíƒœ
                currentPdfUrl: '',
                currentBrandName: '',
                currentBrandProducts: [],
                quickInput: '',
                cart: [],
                userInfo: { company: '', contact: '', memo: '' },

                brands: [
                    { 
                        name: 'Divella', 
                        desc: 'ì´íƒˆë¦¬ì•„ ì •í†µ íŒŒìŠ¤íƒ€ & ì˜¤ì¼',
                        icon: 'fa-solid fa-wheat-awn', 
                        pdf: 'íŒŒìŠ¤íƒ€,ì˜¤ì¼,í–¥ì‹ ë£Œ ì™¸.pdf', 
                        page: 1,
                        items: [
                            { code: 'DIVELLA-01', name: 'ë””ë²¨ë¼ ìŠ¤íŒŒê²Œí‹° 1.75mm', spec: '5kg', tag: 'ì—…ì†Œìš©' },
                            { code: 'DIVELLA-02', name: 'ë””ë²¨ë¼ ë§ê·€ë„¤', spec: '500g x 24', tag: '' },
                            { code: 'DIVELLA-03', name: 'ë””ë²¨ë¼ íœë„¤ ë¦¬ê°€í…Œ', spec: '500g x 24', tag: '' },
                            { code: 'DIVELLA-OIL', name: 'ì—‘ìŠ¤íŠ¸ë¼ ë²„ì§„ ì˜¬ë¦¬ë¸Œì˜¤ì¼', spec: '1L', tag: 'BEST' },
                            { code: 'DIVELLA-TOM', name: 'í¬ëª¨ë„ë¡œ í™€ í† ë§ˆí† ', spec: '2.5kg', tag: '' }
                        ]
                    },
                    { 
                        name: 'Isigny Ste-MÃ¨re', 
                        desc: 'í”„ë‘ìŠ¤ AOP ë²„í„° & ì¹˜ì¦ˆ',
                        icon: 'fa-solid fa-award', 
                        pdf: 'ìœ ëŸ½ì¹˜ì¦ˆì™¸.pdf', 
                        page: 1,
                        items: [
                            { code: '02-01-0004', name: 'ì´ì¦ˆë‹ˆ AOP ë²„í„° ë¡¤ (ë¬´ì—¼)', spec: '250g', tag: 'BEST' },
                            { code: '02-01-0013', name: 'ì´ì¦ˆë‹ˆ AOP ê°€ì—¼ ë²„í„° ë¡¤', spec: '250g', tag: '' },
                            { code: '02-01-0033', name: 'ì´ì¦ˆë‹ˆ í¬ì…˜ ë²„í„° (ì»µ)', spec: '10g x 60ea', tag: 'í˜¸í…”ìš©' },
                            { code: '01-02-0020', name: 'ì´ì¦ˆë‹ˆ ë¸Œë¦¬ ì¹˜ì¦ˆ', spec: '1kg', tag: '' },
                            { code: '01-01-0001', name: 'í”„ë¡œë§ˆì¥¬ ë¸”ë‘', spec: '500g', tag: '' }
                        ]
                    },
                    { 
                        name: 'BelGioioso', 
                        desc: 'ë¯¸êµ­ No.1 í”„ë ˆì‰¬ ì¹˜ì¦ˆ',
                        icon: 'fa-solid fa-cheese', 
                        pdf: 'ë¯¸êµ­ì¹˜ì¦ˆ_ë¶€ë¼íƒ€ ì™¸.pdf', 
                        page: 10,
                        items: [
                            { code: 'A0007', name: 'ë¶€ë¼íƒ€ ì¹˜ì¦ˆ (4 balls)', spec: '226g', tag: 'ì¸ê¸°' },
                            { code: 'A0018', name: 'ë¶€ë¼íƒ€ ì¹˜ì¦ˆ (2 balls)', spec: '226g', tag: '' },
                            { code: 'A0001', name: 'í›„ë ˆì‰¬ ëª¨ì§œë ë¼ ë¡œê·¸', spec: '453g', tag: '' },
                            { code: 'A0010', name: 'ë§ˆìŠ¤ì¹´í¬ë„¤', spec: '226g', tag: 'í‹°ë¼ë¯¸ìˆ˜ìš©' },
                            { code: 'A0033', name: 'ëª¨ì§œë ë¼ ë¡œê·¸ ìŠ¬ë¼ì´ìŠ¤', spec: '907g', tag: 'ëŒ€ìš©ëŸ‰' }
                        ]
                    },
                    { 
                        name: 'Ambrosi', 
                        desc: 'ì´íƒˆë¦¬ì•„ í”„ë¦¬ë¯¸ì—„ ì¹˜ì¦ˆ',
                        icon: 'fa-solid fa-earth-europe', 
                        pdf: 'ë¯¸êµ­ì¹˜ì¦ˆ_ë¶€ë¼íƒ€ ì™¸.pdf', 
                        page: 23,
                        items: [
                            { code: 'J0018', name: 'ê³ ë¥´ê³¤ì¡¸ë¼ í”¼ì¹¸í…Œ', spec: '150g', tag: '' },
                            { code: 'J0015', name: 'ê·¸ë¼ë‚˜ íŒŒë‹¤ë…¸ ë¸”ëŸ­', spec: '1kg', tag: '' },
                            { code: 'J0004', name: 'ì•”ë¸Œë¡œì‹œ ë§ˆìŠ¤ì¹´í¬ë„¤', spec: '250g', tag: '' },
                            { code: 'J0012', name: 'ìœ ê¸°ë† íŒŒë¥´ë¯¸ì§€ì•„ë…¸ ë ˆì§€ì•„ë…¸', spec: '150g', tag: 'ìœ ê¸°ë†' }
                        ]
                    },
                    { 
                        name: 'TSC', 
                        desc: 'ê¸€ë¡œë²Œ ëƒ‰ì¥ ìŠ¤ë‚µ',
                        icon: 'fa-solid fa-cookie-bite', 
                        pdf: 'ë¯¸êµ­ì¹˜ì¦ˆ_ë¶€ë¼íƒ€ ì™¸.pdf', 
                        page: 27,
                        items: [
                            { code: 'WA001', name: 'ì˜¤ë ˆì˜¤ ë°€í¬ ìŠ¤ë‚µ', spec: '30g x 4', tag: 'ë””ì €íŠ¸' },
                            { code: 'WA003', name: 'ë°€ì¹´ ë°€í¬ ìŠ¤ë‚µ', spec: '32g x 4', tag: '' },
                            { code: 'WA005', name: 'ë¯¸ë‹ˆì–¸ì¦ˆ ë°€í¬ ìŠ¤ë‚µ', spec: '30g x 4', tag: 'í‚¤ì¦ˆ' }
                        ]
                    }
                ],

                openPdfViewer(brand) {
                    this.loadingPdf = true;
                    this.currentPdfUrl = `${brand.pdf}#page=${brand.page}&view=FitH`;
                    this.currentBrandName = brand.name;
                    this.currentBrandProducts = brand.items.map(item => ({...item, brandName: brand.name}));
                    this.isViewerOpen = true;
                    document.body.style.overflow = 'hidden';
                },

                closePdfViewer() {
                    this.isViewerOpen = false;
                    this.currentPdfUrl = '';
                    document.body.style.overflow = 'auto';
                },

                addToCart(product) {
                    if (!this.isInCart(product)) {
                        this.cart.push(product);
                    } else {
                        this.cart = this.cart.filter(item => item.code !== product.code);
                    }
                },

                addQuickItem() {
                    if (!this.quickInput.trim()) return;
                    this.cart.push({ code: 'DIRECT', name: this.quickInput, spec: 'ìƒì„¸ë¬¸ì˜', brandName: 'ì§ì ‘ì…ë ¥' });
                    this.quickInput = '';
                },

                removeFromCart(index) {
                    this.cart.splice(index, 1);
                },

                isInCart(product) {
                    return this.cart.some(item => item.code === product.code);
                },

                generateReceipt() {
                    if (this.cart.length === 0) return;
                    this.showReceipt = true;
                    this.showKakaoLink = false; // ìƒíƒœ ì´ˆê¸°í™”
                },

                sendAndDownloadReceipt() {
                    this.isSending = true;

                    const element = document.getElementById('receipt-capture');
                    
                    html2canvas(element, {
                        scale: 2, 
                        backgroundColor: "#ffffff",
                        logging: false,
                        useCORS: true
                    }).then(canvas => {
                        // ì„œë²„ ì „ì†¡ ì‹œë®¬ë ˆì´ì…˜ (1.5ì´ˆ í›„ ì™„ë£Œ)
                        setTimeout(() => {
                            this.isSending = false;
                            
                            // ì•ˆë‚´ ë©”ì‹œì§€ (ì„ íƒ ì‚¬í•­)
                            // alert('ê²¬ì  ìš”ì²­ì„œê°€ ë‹´ë‹¹ìì—ê²Œ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€\n\n(ê³ ê°ë‹˜ í™•ì¸ìš© ì‚¬ë³¸ì´ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.)');

                            // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
                            const link = document.createElement('a');
                            link.download = `êµ¬ë¥´ë©”ì œì£¼_ê²¬ì ìš”ì²­_${this.userInfo.company}_ì‚¬ë³¸.png`;
                            link.href = canvas.toDataURL("image/png");
                            link.click();

                            // [NEW] ìƒíƒœ ë³€ê²½ -> ì¹´í†¡ ë²„íŠ¼ ë³´ì´ê¸°
                            this.showKakaoLink = true;

                        }, 1500);
                    });
                }
            }
        }
    </script>
</body>
</html>