<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gourmet Jeju - B2B 견적 시스템 데모</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

    <script>
        // Tailwind CSS 설정 (커스텀 색상 및 폰트 적용)
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#05668D', // 짙은 파랑/청록 계열 (메인)
                        'secondary': '#E0EAEF', // 밝은 파랑 계열 (보조 배경)
                        'accent': '#FF6B6B', // 밝은 빨강/코랄 계열 (강조)
                    },
                    fontFamily: {
                        sans: ['Noto Sans KR', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* 기본 폰트 적용 및 스크롤 부드럽게 */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            scroll-behavior: smooth;
        }
        /* 탭 버튼 활성화 스타일 */
        .tab-btn-active {
            background-color: #05668D; /* primary */
            color: white;
            font-weight: 700;
            border-bottom: 4px solid #FF6B6B; /* accent */
        }
        /* '견적함에 추가됨' 버튼 스타일 */
        .bg-secondary.text-primary {
            color: #05668D;
            background-color: #E0EAEF;
        }
    </style>
</head>
<body class="bg-white">

    <header class="bg-primary text-white sticky top-0 z-50 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="#" class="text-2xl font-bold">Gourmet Jeju</a>
                
                <nav class="hidden md:flex space-x-8 font-medium">
                    <a href="#products" class="hover:text-accent transition-colors">상품 목록</a>
                    <a href="#contact" class="hover:text-accent transition-colors">B2B 견적</a>
                    <a href="#" class="hover:text-accent transition-colors">회사 소개</a>
                </nav>

                <button id="mobile-menu-btn" class="md:hidden text-2xl p-2">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <nav id="mobile-menu" class="hidden md:hidden bg-primary text-white shadow-lg pb-4">
            <a href="#products" class="block px-4 py-3 text-lg hover:bg-white hover:text-primary">상품 목록</a>
            <a href="#contact" class="block px-4 py-3 text-lg hover:bg-white hover:text-primary">B2B 견적</a>
            <a href="#" class="block px-4 py-3 text-lg hover:bg-white hover:text-primary">회사 소개</a>
        </nav>
    </header>

    <main class="pt-8">
        
        <section id="products" class="py-16 md:py-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h1 class="text-4xl font-extrabold text-primary mb-12 text-center">제주 특급 식자재 B2B 상품 목록</h1>
                
                <div class="flex flex-wrap justify-center mb-10 border-b border-gray-200">
                    <button class="tab-btn tab-btn-active py-3 px-6 text-gray-700 hover:bg-gray-100 transition-all duration-150" data-tab="all">전체 상품</button>
                    <button class="tab-btn py-3 px-6 text-gray-700 hover:bg-gray-100 transition-all duration-150" data-tab="cheese-butter">치즈/버터</button>
                    <button class="tab-btn py-3 px-6 text-gray-700 hover:bg-gray-100 transition-all duration-150" data-tab="meat">육류/가공품</button>
                    <button class="tab-btn py-3 px-6 text-gray-700 hover:bg-gray-100 transition-all duration-150" data-tab="seafood">해산물</button>
                </div>

                <div id="product-tabs-content">
                    
                    <div id="tab-all" class="tab-panel grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                        
                        <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200" data-category="cheese-butter">
                            <img src="https://via.placeholder.com/400x300/F5A760/FFFFFF?text=Product+Cheese" alt="고급 치즈" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">프리미엄 모짜렐라 (1kg)</h3>
                                <p class="text-gray-600 mb-4 text-sm">최상급 원유로 만든 부드러운 모짜렐라 치즈.</p>
                                <button class="add-to-quote-btn w-full py-3 px-4 rounded-lg text-white font-semibold bg-primary hover:bg-opacity-90 transition-colors"
                                        data-name="프리미엄 모짜렐라 (1kg)"
                                        data-img="https://via.placeholder.com/400x300/F5A760/FFFFFF?text=Product+Cheese">
                                    견적 목록에 담기
                                </button>
                            </div>
                        </div>

                        <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200" data-category="cheese-butter">
                            <img src="https://via.placeholder.com/400x300/F0D290/000000?text=Product+Butter" alt="유기농 버터" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">무염 유기농 버터 (250g)</h3>
                                <p class="text-gray-600 mb-4 text-sm">프랑스산 유기농 원유로 만든 최고급 버터.</p>
                                <button class="add-to-quote-btn w-full py-3 px-4 rounded-lg text-white font-semibold bg-primary hover:bg-opacity-90 transition-colors"
                                        data-name="무염 유기농 버터 (250g)"
                                        data-img="https://via.placeholder.com/400x300/F0D290/000000?text=Product+Butter">
                                    견적 목록에 담기
                                </button>
                            </div>
                        </div>

                        <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200" data-category="meat">
                            <img src="https://via.placeholder.com/400x300/A30000/FFFFFF?text=Product+Meat" alt="제주 흑돼지" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">제주 흑돼지 목살 (냉장 500g)</h3>
                                <p class="text-gray-600 mb-4 text-sm">청정 제주에서 자란 명품 흑돼지.</p>
                                <button class="add-to-quote-btn w-full py-3 px-4 rounded-lg text-white font-semibold bg-primary hover:bg-opacity-90 transition-colors"
                                        data-name="제주 흑돼지 목살 (냉장 500g)"
                                        data-img="https://via.placeholder.com/400x300/A30000/FFFFFF?text=Product+Meat">
                                    견적 목록에 담기
                                </button>
                            </div>
                        </div>

                        <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200" data-category="seafood">
                            <img src="https://via.placeholder.com/400x300/409CFF/FFFFFF?text=Product+Seafood" alt="제주 전복" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">활 전복 특대 (1kg)</h3>
                                <p class="text-gray-600 mb-4 text-sm">제주 해녀가 직접 채취한 싱싱한 활 전복.</p>
                                <button class="add-to-quote-btn w-full py-3 px-4 rounded-lg text-white font-semibold bg-primary hover:bg-opacity-90 transition-colors"
                                        data-name="활 전복 특대 (1kg)"
                                        data-img="https://via.placeholder.com/400x300/409CFF/FFFFFF?text=Product+Seafood">
                                    견적 목록에 담기
                                </button>
                            </div>
                        </div>
                        
                        </div>
                    
                    <div id="tab-cheese-butter" class="tab-panel grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 hidden">
                        <p class="text-center col-span-full py-10 text-gray-500">치즈/버터 카테고리 상품이 여기에 표시됩니다. (데모용 플레이스홀더)</p>
                    </div>

                    <div id="tab-meat" class="tab-panel grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 hidden">
                        <p class="text-center col-span-full py-10 text-gray-500">육류/가공품 카테고리 상품이 여기에 표시됩니다. (데모용 플레이스홀더)</p>
                    </div>

                    <div id="tab-seafood" class="tab-panel grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 hidden">
                        <p class="text-center col-span-full py-10 text-gray-500">해산물 카테고리 상품이 여기에 표시됩니다. (데모용 플레이스홀더)</p>
                    </div>

                </div>

            </div>
        </section>


        <section id="contact" class="py-20 md:py-28 bg-gray-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
                    
                    <div class="bg-white p-8 md:p-12 rounded-lg shadow-xl">
                        <h2 class="text-3xl font-bold text-primary mb-4">B2B 사업자 전용 단가표 받기</h2>
                        <p class="text-gray-600 mb-8">
                            사업자 등록증을 인증해 주시면, 제주 특급 호텔에 납품되는 동일한 B2B 특별 단가표를 즉시 이메일로 발송해 드립니다.
                        </p>
                        
                        <form id="quote-form" class="space-y-6">
                            <div>
                                <label for="company-name" class="block text-sm font-medium text-gray-700">업체명</label>
                                <input type="text" id="company-name" name="company-name" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700">연락처</label>
                                <input type="tel" id="phone" name="phone" required placeholder="010-1234-5678" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent">
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-gray-700">문의내용 (선택사항)</label>
                                <textarea id="message" name="message" rows="4" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent" placeholder="관심있는 품목이나 배송 관련 특별 요청사항을 남겨주세요..."></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full flex justify-center py-4 px-6 border border-transparent rounded-md shadow-sm text-lg font-bold text-white bg-accent hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all">
                                    제주 최저가 견적 받기
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="h-full">
                        <div class="bg-white p-8 md:p-12 rounded-lg shadow-xl h-full min-h-[400px]">
                            <h3 class="text-2xl font-bold text-primary mb-6">견적 요청 목록</h3>
                            <div id="quote-list-container" class="h-full">
                                <ul id="quote-list" class="space-y-4 max-h-[500px] overflow-y-auto">
                                    </ul>
                                <p id="quote-empty-msg" class="text-gray-500 text-center py-10">
                                    <i class="fas fa-clipboard-list text-4xl text-gray-300 mb-4"></i><br>
                                    견적함이 비어있습니다. <br> 상품 목록에서 품목을 추가해주세요.
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <div id="sticky-quote-bar" class="fixed bottom-0 left-0 w-full bg-primary text-white p-4 shadow-[0_-4px_10px_rgba(0,0,0,0.1)] z-40 transform translate-y-full transition-transform duration-300 ease-in-out">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <div>
                <span class="font-semibold">견적함에</span>
                <span id="quote-count-badge" class="inline-flex items-center justify-center w-6 h-6 ml-2 bg-accent text-white text-xs font-bold rounded-full">0</span>
                <span class="font-semibold ml-1">개의 상품이 있습니다.</span>
            </div>
            <a href="#contact" class="bg-accent text-white px-5 py-2 rounded-full font-bold text-sm hover:bg-opacity-90 transition-all">
                견적 문의하기
            </a>
        </div>
    </div>

    <footer class="bg-gray-800 text-gray-400 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="font-bold text-white text-lg mb-2">Gourmet Jeju (구르메 제주)</p>
            <p class="text-sm">대표: OOO | 사업자등록번호: 000-00-00000</p>
            <p class="text-sm">주소: 제주특별자치도 제주시 OOO로 123 물류센터</p>
            <p class="text-sm mt-4">&copy; 2024 Gourmet Jeju. All rights reserved.</p>
            <p class="text-xs mt-2">본 웹사이트는 실제 운영 사이트가 아닌, 포트폴리오용 데모입니다.</p>
        </div>
    </footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- STATE (견적함 상태 관리) ---
        let quoteItems = []; // { name: '...', img: '...' }

        // --- SELECTORS (주요 DOM 요소) ---
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabPanels = document.querySelectorAll('.tab-panel');

        const addToQuoteBtns = document.querySelectorAll('.add-to-quote-btn');
        const quoteListUL = document.getElementById('quote-list');
        const quoteEmptyMsg = document.getElementById('quote-empty-msg');
        
        const stickyBar = document.getElementById('sticky-quote-bar');
        const quoteCountBadge = document.getElementById('quote-count-badge');

        const quoteForm = document.getElementById('quote-form');

        // --- 1. 모바일 메뉴 토글 기능 ---
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            // 아이콘 변경 (bars <-> times)
            const icon = mobileMenuBtn.querySelector('i');
            if (mobileMenu.classList.contains('hidden')) {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            } else {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            }
        });
        // 모바일 메뉴에서 링크 클릭 시 메뉴 닫기
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
                mobileMenuBtn.querySelector('i').classList.remove('fa-times');
                mobileMenuBtn.querySelector('i').classList.add('fa-bars');
            });
        });


        // --- 2. 상품 탭(Tab) 기능 ---
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // 1. 모든 버튼 비활성화
                tabBtns.forEach(b => b.classList.remove('tab-btn-active'));
                // 2. 클릭된 버튼 활성화
                btn.classList.add('tab-btn-active');

                // 3. 모든 패널 숨기기
                tabPanels.forEach(panel => panel.classList.add('hidden'));
                
                // 4. 타겟 패널 보이기
                const targetTabId = btn.dataset.tab;
                document.getElementById(`tab-${targetTabId}`).classList.remove('hidden');
            });
        });

        // --- 3. "견적 담기" B2B 로직 ---

        // 견적함 목록(우측)과 하단 바를 업데이트하는 함수
        function renderQuoteList() {
            // 하단 스티키 바의 카운트 뱃지 업데이트
            quoteCountBadge.innerText = quoteItems.length;

            // 견적함에 상품이 1개 이상이면 스티키 바 표시
            if (quoteItems.length > 0) {
                stickyBar.classList.remove('translate-y-full');
            } else {
                stickyBar.classList.add('translate-y-full');
            }

            // Contact 섹션의 견적 목록(ul) 업데이트
            if (quoteItems.length === 0) {
                quoteEmptyMsg.classList.remove('hidden'); // "견적함이 비어있습니다" 메시지 표시
                quoteListUL.innerHTML = ''; // 목록 비우기
            } else {
                quoteEmptyMsg.classList.add('hidden'); // 빈 메시지 숨기기
                quoteListUL.innerHTML = ''; // 목록 초기화
                
                // 견적함 배열(quoteItems)을 순회하며 li 태그 생성
                quoteItems.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-md shadow-sm';
                    li.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <img src="${item.img}" alt="${item.name}" class="w-12 h-12 object-cover rounded-md">
                            <span class="font-semibold text-gray-800">${item.name}</span>
                        </div>
                        <button class="remove-from-quote-btn text-red-500 hover:text-red-700" data-name="${item.name}" data-index="${index}" title="삭제">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    `;
                    quoteListUL.appendChild(li);
                });

                // 새로 생성된 삭제 버튼들에 이벤트 리스너 추가
                document.querySelectorAll('.remove-from-quote-btn').forEach(btn => {
                    btn.addEventListener('click', handleRemoveItem);
                });
            }
        }

        // [견적 목록에 담기] 버튼 클릭 시
        function handleAddItem(e) {
            const btn = e.target.closest('.add-to-quote-btn');
            const name = btn.dataset.name;
            const img = btn.dataset.img;

            // 중복 확인
            if (quoteItems.some(item => item.name === name)) {
                return; 
            }

            // 1. 상태(State)에 아이템 추가
            quoteItems.push({ name, img });

            // 2. 버튼 상태 변경 (Disabled)
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-check mr-2"></i>견적함에 추가됨';
            btn.classList.remove('bg-primary');
            btn.classList.add('bg-secondary', 'text-primary', 'cursor-not-allowed');

            // 3. UI 업데이트 (견적 목록 + 하단 바)
            renderQuoteList();
        }

        // 견적 목록에서 [삭제] 버튼 클릭 시
        function handleRemoveItem(e) {
            const btn = e.currentTarget;
            const indexToRemove = parseInt(btn.dataset.index, 10);
            
            // **디버깅 수정: 삭제 전, 제거할 아이템의 이름을 quoteItems 배열에서 가져온다.**
            // (원본 코드에서 quoteItems.name은 배열이라 오류 발생)
            const removedItemName = quoteItems[indexToRemove].name; 

            // 1. 상태(State)에서 아이템 제거
            quoteItems.splice(indexToRemove, 1);

            // 2. UI 업데이트
            renderQuoteList();

            // 3. 원본 상품 카드의 [견적 담기] 버튼 복구 (이름을 이용해 찾음)
            // 주의: 상품 목록에 data-name 속성이 반드시 일치해야 함
            const originalAddBtn = document.querySelector(`.add-to-quote-btn[data-name="${removedItemName}"]`);
            if (originalAddBtn) {
                originalAddBtn.disabled = false;
                originalAddBtn.innerHTML = '견적 목록에 담기';
                originalAddBtn.classList.add('bg-primary');
                originalAddBtn.classList.remove('bg-secondary', 'text-primary', 'cursor-not-allowed');
            }
        }

        // 모든 [견적 담기] 버튼 초기화 (폼 제출 후 사용)
        function resetAllAddButtons() {
            addToQuoteBtns.forEach(btn => {
                btn.disabled = false;
                btn.innerHTML = '견적 목록에 담기';
                btn.classList.add('bg-primary');
                btn.classList.remove('bg-secondary', 'text-primary', 'cursor-not-allowed');
            });
        }

        // --- 4. 견적 폼 제출 (데모) ---
        quoteForm.addEventListener('submit', (e) => {
            e.preventDefault(); // 실제 서버 제출 방지

            const companyName = document.getElementById('company-name').value;
            
            if (quoteItems.length === 0) {
                alert('견적함이 비어있습니다. 견적을 요청할 상품을 1개 이상 담아주세요.');
                return;
            }
            
            // 견적 목록을 텍스트로 변환
            const quoteItemListText = quoteItems.map(item => `- ${item.name}`).join('\n');
            
            // 데모 제출 완료 알림
            alert(
                `(데모) ${companyName}님, 견적 요청이 성공적으로 접수되었습니다.\n\n` +
                `--- 요청하신 품목 (총 ${quoteItems.length}개) ---\n` +
                `${quoteItemListText}\n\n` +
                `담당자가 곧 연락드리겠습니다.`
            );

            // 상태 초기화
            quoteItems = [];
            quoteForm.reset(); // 폼 필드 비우기
            resetAllAddButtons(); // 모든 상품 버튼 초기화
            renderQuoteList(); // 견적함 UI 초기화 (빈 상태로)
        });


        // --- 페이지 로드 시 초기 실행 ---
        
        // 모든 [견적 담기] 버튼에 클릭 이벤트 리스너 장착
        addToQuoteBtns.forEach(btn => {
            btn.addEventListener('click', handleAddItem);
        });
        
        // 탭 로직 (페이지 로드 시 '전체' 탭 활성화 및 해당 패널만 보이도록)
        // 1. 모든 패널 숨기기
        tabPanels.forEach(p => p.classList.add('hidden'));
        // 2. 'all' 탭 패널만 보이기 (ID: tab-all)
        // **수정**: 상품 카드들을 모두 tab-all에 넣어 하나의 리스트로 보여준다.
        const allTabPanel = document.getElementById('tab-all');
        if (allTabPanel) {
            allTabPanel.classList.remove('hidden');
        }
        // 3. 'all' 탭 버튼만 활성화
        const allTabBtn = document.querySelector('.tab-btn[data-tab="all"]');
        tabBtns.forEach(b => b.classList.remove('tab-btn-active'));
        if (allTabBtn) {
            allTabBtn.classList.add('tab-btn-active');
        }
        
        // 견적함 UI 초기 렌더링 (빈 상태 표시)
        renderQuoteList(); 

    });
</script>

</body>
</html>